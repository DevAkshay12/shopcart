sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/layout/BlockLayoutRow","sap/ui/layout/BlockLayoutCell","sap/ui/layout/VerticalLayout","sap/m/ObjectIdentifier","sap/m/ObjectStatus","sap/m/Image","sap/m/Button","sap/ui/core/mvc/Controller"],(e,t,s,a,n,o,i,l)=>{"use strict";return e.extend("shopcart.controller.View2",{onInit:function(){debugger;const e=this.getOwnerComponent().getModel();if(!e){console.error("Model not found");return}var t=this.byId("_IDGenCarousel");setInterval(function(){t.next()},2e3);const s=e.bindList("/productimg");s.attachDataReceived(e=>{const t=e.getSource().getContexts();const s=t.map(e=>e.getObject());this._populateBlockLayout(s)});s.getContexts(0,10)},_populateBlockLayout:function(e){debugger;const s=this.byId("block");const a=2;for(let o=0;o<e.length;o+=a){const i=new t;for(let t=0;t<a&&o+t<e.length;t++){var n;const s=e[o+t];const a=s.state==="available"?"Avalstate":s.state==="notavailable"?"notavalstate":"Defaulstate";const l=s.url||"img/placeholder.jpg";const r=new sap.m.VBox({alignItems:"Center",justifyContent:"Center",items:[new sap.m.HBox({width:"100%",justifyContent:"SpaceBetween",alignItems:"Center",items:[new sap.m.VBox({items:[new sap.m.ObjectIdentifier({title:s.name}),new sap.m.ObjectStatus({text:s.state}).addStyleClass(a)]}),new sap.m.Button({icon:"sap-icon://hint",type:"Transparent",press:async e=>{var s=e.getSource().getParent().mAggregations.items[0].mAggregations.items[0].mProperties.title;try{const e=window.location.origin;const a=`${e}/odata/v4/shop/Products?$filter=name eq '${s}'`;debugger;const i=await fetch(a,{credentials:"include",headers:{Accept:"application/json"}});const l=await i.json();if(l.value&&l.value.length>0){n=l.value[0];sap.ui.getCore().byId(`desc_${o}_${t}`).setText(n.description||"No description");sap.ui.getCore().byId(`price_${o}_${t}`).setNumber(n.price||0);sap.ui.getCore().byId(`supp_${o}_${t}`).setText(n.supplier||"No Supplier");sap.ui.getCore().byId(`dis_${o}_${t}`).setText(n.discount||"No discounts Available");console.log("Product Details:",n)}else{console.warn("No product found with name:",s)}}catch(e){debugger;console.error("Fetch error:",e)}const a=e.getSource();const i=a.getParent().getParent();const l=i.getItems();const r=l[0];const c=l[3];const d=l[1].getVisible();if(d){a.setIcon("sap-icon://undo");l[1].setVisible(false);l[2].setVisible(false);c.setVisible(true);i.removeStyleClass("unflip");i.addStyleClass("flip");c.addStyleClass("no-flip");r.addStyleClass("no-flip")}else{a.setIcon("sap-icon://hint");l[1].setVisible(true);l[2].setVisible(true);c.setVisible(false);i.removeStyleClass("flip");i.addStyleClass("unflip");c.removeStyleClass("no-flip");r.removeStyleClass("no-flip");setTimeout(()=>{i.removeStyleClass("unflip")},600)}}}).addStyleClass("hintBtn")]}),new sap.m.Image({src:l,width:"150px",height:"150px",densityAware:false,decorative:false}).addStyleClass("Image"),new sap.m.Button({icon:"sap-icon://cart-3",type:"Transparent"}).addStyleClass("cart"),new sap.m.VBox({visible:false,alignItems:"Center",justifyContent:"Center",items:[new sap.m.Text({id:`desc_${o}_${t}`,text:"Loading..."}).addStyleClass("cardtext"),new sap.m.Label({text:"",width:"8px"}),new sap.m.ObjectNumber({id:`price_${o}_${t}`,number:""}).addStyleClass("cardprice"),new sap.m.Text({id:`supp_${o}_${t}`,text:"Loading..."}).addStyleClass("cardsupplier"),new sap.m.Label({text:"",width:"8px"}).addStyleClass("spacer"),new sap.m.Text({id:`dis_${o}_${t}`,text:"Loading..."}).addStyleClass("disc"),new sap.m.Button({icon:"sap-icon://cart-3"}).addStyleClass("cart")]})]});const c=new sap.ui.layout.BlockLayoutCell({content:[r]});i.addContent(c)}s.addContent(i)}}})});
//# sourceMappingURL=View2.controller.js.map